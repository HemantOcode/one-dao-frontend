server {
    listen 80; # Listen on port 80 as exposed in the Dockerfile

    # Specifies the root directory where Nginx will look for files.
    # This matches the destination in your Dockerfile:
    # COPY --from=builder /app/build /usr/share/nginx/html
    root /usr/share/nginx/html;

    # Specifies the default file to serve when a directory is requested
    index index.html;

    # Main location block to handle all requests
    location / {
        # Try to serve the requested file first (e.g., /styles.css, /image.jpg)
        try_files $uri $uri/ /index.html; 
        
        # CRITICAL for SPAs (React/Vue/Angular):
        # If the requested URI ($uri) or a directory ($uri/) is not found,
        # Nginx falls back to serving /index.html.
        # This allows the client-side router to handle the path (e.g., /about).
    }

    # Optional: Cache control for assets
    location /static/ {
        expires 1y;
        add_header Cache-Control "public";
    }

    # Optional: Log settings
    error_log /var/log/nginx/error.log warn;
    access_log /var/log/nginx/access.log combined;

    # Fallback error page
    error_page 500 502 503 504 /50x.html;
    location = /50x.html {
        root /usr/share/nginx/html;
    }
}